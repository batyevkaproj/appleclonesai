{% extends 'base.html' %} <!-- Optional: use base template -->

{% block title %}Shop - Apple Clone{% endblock %}

{% block head_extra %}
    <!-- Link shop-specific CSS if needed -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shop.css') }}">
    <!-- Include the placeholder styles from previous step if not in shop.css -->
    <style>
        /* Paste the <style> content from the previous HTML example here if you didn't move it to shop.css */
        /* Make sure image paths in CSS background-image properties also use url_for if needed */
    </style>
{% endblock %}


{% block content %}
<div class="shop-container">
    <!-- Filter Sidebar -->
    <aside class="filter-sidebar">
        <h2>Categories</h2>
        <ul class="category-list" id="category-list">
            <!-- Meta Filters First (All, Goods, Services) -->
            {% for meta_cat in meta_categories %}
             <li><button data-filter="{{ meta_cat.slug }}" class="{{ 'active' if meta_cat.slug == 'all' else '' }}">{{ meta_cat.name }}</button></li>
            {% endfor %}

            <hr style="border: none; border-top: 1px solid #d2d2d7; margin: 10px 0;">

            <!-- Specific Categories -->
            {% for category in categories %}
            <li><button data-filter="{{ category.slug }}">{{ category.name }}</button></li>
            {% endfor %}
        </ul>
    </aside>

    <!-- Product Display Area -->
    <main class="product-display">
        <div class="product-grid" id="product-grid">
            <!-- Products loaded dynamically -->
            {% if products %}
                {% for product in products %}
                <div class="product-card" data-category="{{ product.category_slug }} {{ product.category_type }}">
                    <!-- Use url_for for static images IF they are served by Flask -->
                    <!-- If images are external URLs, just use product.image_url directly -->
                    <img src="{{ product.image_url }}" alt="{{ product.name }}">
                    <h3>{{ product.name }}</h3>
                    <p class="product-category">{{ product.category_type | capitalize }} / {{ product.category_name }}</p>
                    <p class="product-price">{{ product.price }}</p>
                    <button class="buy-button">Buy</button> <!-- Or appropriate action -->
                </div>
                {% endfor %}
            {% else %}
                <p>No products found.</p>
             {% endif %}
        </div>

        <!-- Pagination Controls -->
        <nav class="pagination" id="pagination-controls" aria-label="Product page navigation">
            <!-- Pagination buttons will be generated by JS -->
        </nav>
    </main>
</div>
{% endblock %}

{% block scripts %}
 <!-- Link to Shop JavaScript using url_for -->
<script src="{{ url_for('static', filename='js/shop.js') }}"></script>
{% endblock %}.
